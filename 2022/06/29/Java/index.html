<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Java, XC 的个人博客">
    <meta name="description" content="一份关于Java基本操作的笔记

Java随记面向过程编程同一个模块或不同模块的函数能够不受限制的访问全局性数据，全局数据和函数之间缺乏联系
面向对象编程1.定义在程序中包含各种独立而又互相调用的对象的思想。将数据与对数据的操作封装到一个数">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>Java | XC 的个人博客</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">XC 的个人博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">XC 的个人博客</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://raw.githubusercontent.com/FaustProMaxPX/pic_repository/main/img/JavaCupLogo.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Java</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Java/">
                                <span class="chip bg-color">Java</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                学习笔记
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-06-29
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    10.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    40 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>一份关于Java基本操作的笔记</p>
<span id="more"></span>
<h1 id="Java随记"><a href="#Java随记" class="headerlink" title="Java随记"></a>Java随记</h1><h2 id="面向过程编程"><a href="#面向过程编程" class="headerlink" title="面向过程编程"></a>面向过程编程</h2><p>同一个模块或不同模块的函数能够不受限制的访问全局性数据，全局数据和函数之间缺乏联系</p>
<h2 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h3><p>在程序中包含各种独立而又互相调用的对象的思想。将数据与对数据的操作封装到一个数据类型之中，该数据类型又可以与其他数据类型进行交互。</p>
<h3 id="2-优势"><a href="#2-优势" class="headerlink" title="2.优势"></a>2.优势</h3><ul>
<li>加大封装力度  若在程序投入使用后，部分数据结构必须改变，那么受影响的也只是对象内部的逻辑。</li>
<li>提升复用性</li>
<li>提高设计效率</li>
</ul>
<h3 id="3-类与对象"><a href="#3-类与对象" class="headerlink" title="3.类与对象"></a>3.类与对象</h3><p>Classes：定义了一件事物的抽象特点。包含了数据以及对数据的操作</p>
<p>Objects：类的实例</p>
<h3 id="4-类与类之间的关系"><a href="#4-类与类之间的关系" class="headerlink" title="4.类与类之间的关系"></a>4.类与类之间的关系</h3><ul>
<li>依赖关系：一个类使用或知道另一个类。是一种瞬时关系，依赖类和目标类进行简单的交互</li>
<li>关联关系：一个类在很长一段时间内都会与另一个类有合作关系<ul>
<li>关联关系的三要素：关联的方向、关联的数量、关联的属性</li>
</ul>
</li>
<li>继承关系</li>
</ul>
<h3 id="5-对象的创建"><a href="#5-对象的创建" class="headerlink" title="5.对象的创建"></a>5.对象的创建</h3><p>对象变量的声明：在栈中为对象变量分配一个存储地址数据的内存空间</p>
<p>对象的创建：在堆中分配对象所占的空间，对象变量指向该地址</p>
<p>对象的销毁：当程序中不存在该对象的引用时，就会销毁</p>
<h2 id="Java包"><a href="#Java包" class="headerlink" title="Java包"></a>Java包</h2><p>包用于组织、管理类，并且解决类命名冲突问题</p>
<p>若一个源文件中不加package语句，则指定为缺省包，类文件位于当前工作目录下</p>
<h2 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h2><p>三元运算符所在表达式会成为一个整体，其精度会由式中最高精度决定。</p>
<h2 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h2><p>语法: ReturnType funName(TypeName…varName)<br><strong>本质是数组</strong><br>可变参数必须在参数列表的最后一个，并且只能有一个可变参数。</p>
<h2 id="super关键字"><a href="#super关键字" class="headerlink" title="super关键字"></a>super关键字</h2><p>1.访问父类的属性但不能访问父类的私有属性：super.属性名&#x2F;方法名<br>2.访问父类的的构造器：super(参数列表)</p>
<h2 id="动态绑定机制"><a href="#动态绑定机制" class="headerlink" title="动态绑定机制"></a>动态绑定机制</h2><p>当调用对象方法时，该方法会和该对象的<strong>内存地址&#x2F;运行类型</strong>绑定<br>当调用对象属性时，<strong>没有动态绑定</strong>.</p>
<p><strong>类的五大成员：属性，方法，代码块，构造器，内部类</strong></p>
<h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>static代码块作用就是对类进行初始化，并且它随着<strong>类的加载</strong>而执行，并且只<strong>执行一次</strong>，而普通代码块每创建一个对象就会执行（可以理解为它和构造函数绑定）</p>
<p><strong>类什么时候被加载</strong><br>1.创建对象实例的时候(new)<br>2.子类被加载时，父类也会被加载。<br>3.使用静态成员时（静态属性和方法） PS:调用静态成员时不会执行普通代码块中的内容</p>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><p>定义：一个类的内部又完整的嵌套了另一个类结构，被嵌套的类称为内部类。<br>特点：可以直接访问私有属性，并且可以体现类与类之间的包含关系。</p>
<p><strong>内部类的构造器的第一个参数会被显示指定为外部类实例（锚定）</strong></p>
<p>分类：<br>1.定义在外部类局部位置上（比如方法内）：<br>1)局部内部类（有类名）<br>2)<strong>匿名内部类（没有类名）</strong><br>2.定义在外部类的成员位置上：<br>1)成员内部类（没用static修饰）<br>2)静态内部类（用static修饰）</p>
<p><strong>局部内部类，匿名内部类的实质是一个对象，一个局部变量，因此不能被外部其他类访问。</strong></p>
<h3 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h3><p>1.可以直接访问外部类的所有成员（包含所有的）<br>2.不能被修饰符所修饰，因为他本质是一个局部变量<br>3.作用域：仅在定义它的方法与代码块中。<br>4.外部其他类不能访问局部内部类。<br>5.若外部类和局部内部类的成员重名时，采取<strong>就近原则</strong>,若要调用外部类成员则要使用<br>外部类名.this.成员 （re：对应成员并非静态变量，需要用对象来调用，此时this相当于指向该外部类的当前对象）</p>
<h3 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h3><p>语法：new 类或接口(参数列表){具体实现} （若实现某个接口则不需要传入参数列表，参数列表会被传递给构造器。） PS:生成的匿名内部类的运行类型不是实现的类或接口。<br>使用环境：类或接口中的抽象方法需要被实现来使用或是要重载重写，但使用次数极少，此时使用匿名内部类可避免额外再创建一个类。</p>
<h3 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h3><p>外部其他类访问内部类：<br>1.外部类.内部类 name &#x3D; 外部类<strong>对象</strong>.new 内部类构造函数<br>2.在外部类中写一个获取内部类的方法<br>3.作用域：整个类体</p>
<h3 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h3><p>1.可以访问任意静态外部类成员<br>2.外部其他类访问静态内部类：外部类.内部类 name &#x3D; new 外部类.内部类构造函数 (静态内部类不需要用外部类的对象来调用，因此其构造函数可用外部类名调用)</p>
<h2 id="接口-纯虚基类"><a href="#接口-纯虚基类" class="headerlink" title="接口(纯虚基类)"></a>接口(纯虚基类)</h2><p>1.接口不能被实例化<br>2.接口中所有的方法是public抽象方法, 其中abstract可以省略<br>3.一个普通类实现接口，就必须将该接口中的所有方法都实现，而抽象类可以不必全部实现<br>4.接口中的属性都是final的, 且具体来说是public static final类型的  eg:int a -&gt; public static final int a 即接口中的属性通过接口名来访问。<br>5.接口只能继承其他接口，而非实现其他接口</p>
<h3 id="接口与继承的区别"><a href="#接口与继承的区别" class="headerlink" title="接口与继承的区别"></a>接口与继承的区别</h3><p>继承的价值主要在于：解决代码的复用性和可维护性<br>接口的价值主要在于：设计，设计好各种规范（方法），让其他类去实现这些方法，更加灵活<br><strong>继承满足的是is-a的关系，而接口满足的是like-a的关系</strong><br>接口在一定程度上实现代码解耦。</p>
<h2 id="枚举类"><a href="#枚举类" class="headerlink" title="枚举类"></a>枚举类</h2><p>关键字：enum<br>enum的代码块中包含：枚举类<strong>对象</strong>，枚举类的构造函数，方法，属性，代码块<br>其中枚举类的对象必须声明再最开始，且其中每一个对象默认被public static final修饰<br>方法compareTo()会比较两个枚举量的编号<br>方法ordinal()返回编号<br>构造器默认为私有，且只能为私有<br>会隐式继承Enum类，因此不能继承其他类。</p>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p>注解用于修饰解释 包、类、方法、属性、构造器、局部变量等数据信息。<br>注解不影响程序逻辑，但<strong>注解可以被编译或运行</strong>。</p>
<p>@Override注解：表明以下方法是被重写的，编译器编译时会去父类搜索是否有同名方法，若检测到没有该方法，则会报错。<br>作用域：方法</p>
<p>@Deprecated注解：表明以下内容已经过时，不推荐使用<br>作用域：方法、类、字段、包、参数等等</p>
<p>@SupressWarnings注解：抑制编译器警告<br>语法：@SupressWarnings({要抑制的警告})<br>作用域：方法、类、字段、包、参数等等</p>
<h2 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h2><p>装箱：底层是valueOf()<br>拆箱：底层是XXXValue()</p>
<p>PS:valueOf()底层原理：程序会缓存一个-128-127的数组，因此在这个范围内的数不会重新创建一个对象，但对于超出该范围的数则会返回一个new的对象</p>
<h3 id="String类-不可修改，但复用率高"><a href="#String类-不可修改，但复用率高" class="headerlink" title="String类(不可修改，但复用率高)"></a>String类(不可修改，但复用率高)</h3><p>String类实现了Serializable(序列化), Comparable(可比较)接口。<br>字符串使用Unicode编码，每个字符占两个字节。<br><strong>String类用一个value数组存储字符序列，并且它被final修饰，即其地址不可修改</strong>。<br><strong>re:数组本身是一个地址，因此final其实修饰了一个地址，即String的value中的值可以改变，但其地址不可变。</strong></p>
<p>String的赋值方法:<br>String s1 &#x3D; “abc” <strong>底层原理：变量s1入栈，然后去常量池中寻找是否有”abc”，若没有，则在常量池中创建，然后s1指向常量池中目标的地址。</strong><br>String s2 &#x3D; new String(“abc”) <strong>底层原理：变量s2入栈，然后在堆中开辟一块空间用于维护对象，s2指向该空间，然后去寻找常量池中是否有”abc”,若有，则value直接指向它，若没有，则在常量池中先创建，然后value再指向。</strong></p>
<p>intern()方法：若池中已存在一个等于String对象value值（用equal比较）的对象，则返回常量池中的地址，若没有则在池中创建一个再返回。</p>
<p>String a &#x3D; “a” + “b” 会被编译器优化为：String a &#x3D; “ab”</p>
<p>String a &#x3D; “a”; String b &#x3D; “b”; String c &#x3D; a + b; 先创建一个StringBuilder类，然后调用两次append() [分别把字符串a和字符串b连入SB对象]，最后返回一个字符串对象。<br>最后 a-&gt;堆中对象-&gt;池中对象</p>
<p><strong>String每次重新赋值都会重新开辟空间</strong><br><strong>String本身不可像数组一样访问，要用charAt进行访问。</strong><br>substring的参数为(int beginindex, int lastindex)前闭后开<br>replace对调用对象没有影响，它会返回一个新的字符串。<br>compareTo：若两字符串长度不同且在较小长度范围内相等，则返回长度差值，否则会返回第一组不相同的字符的ASCII码差值。<br>format静态方法（和printf用法类似）</p>
<h3 id="StringBuffer类（可增删，效率较高，线程安全）"><a href="#StringBuffer类（可增删，效率较高，线程安全）" class="headerlink" title="StringBuffer类（可增删，效率较高，线程安全）"></a>StringBuffer类（可增删，效率较高，线程安全）</h3><p>StringBuffer的直接父类是AbstractStringBuilder<br>在父类中有属性char[] value,不是final修饰的，因此该value指向一个<strong>存放在堆中</strong>的字符串<br>StringBuffer是一个final类。</p>
<h4 id="String-gt-StringBuffer"><a href="#String-gt-StringBuffer" class="headerlink" title="String -&gt; StringBuffer"></a>String -&gt; StringBuffer</h4><p>1.StringBuffer strB &#x3D; new StringBuffer(str);<br>2.StringBuffer strB &#x3D; new StringBuffer();  strB &#x3D; strB.append(str)  append)()会返回当前对象的指向</p>
<h3 id="StringBuilder（可增删，效率最高，线程不安全）"><a href="#StringBuilder（可增删，效率最高，线程不安全）" class="headerlink" title="StringBuilder（可增删，效率最高，线程不安全）"></a>StringBuilder（可增删，效率最高，线程不安全）</h3><p>与StringBuffer地API兼容，是它的一个简易替换，但<strong>线程不安全</strong>，在单线程情况下建议使用。</p>
<h3 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h3><p>有SimpleDateFormat类可以与其配套使用<br>SimpleDateFormat用于初始化的参数为日期的格式（字符串）<a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-date-time.html">日期时间的格式化代码</a><br>SimpleDateFormat中有方法format可以使日期时间按要求输出<br>parse方法可以用来将字符串转为日期格式（要与其自身格式相符合）（有异常需要处理）</p>
<h3 id="Calendar"><a href="#Calendar" class="headerlink" title="Calendar"></a>Calendar</h3><p>Calendar是一个抽象类，且其构造器是私有的，需要用getInstance来获取实例</p>
<h3 id="LocalDateTime-LocalDate-LocalTime"><a href="#LocalDateTime-LocalDate-LocalTime" class="headerlink" title="LocalDateTime LocalDate LocalTime"></a>LocalDateTime LocalDate LocalTime</h3><p>LocalDateTime获取年月日时分秒 LocalDate获取年月日 LocalTime获取时分秒<br>DateTimeFormatter用于对它进行格式化<br>DateTimeFormatter dtf &#x3D; DateTimeFormatter.ofPattern(“格式”)</p>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><p>规则 :<br>所有泛型方法都有一个类型参数声明部分，声明在方法返回类型之前<br>类型参数能被用来声明返回值类型，并且能作为泛型方法得到的实际参数占位符<br>类型参数只能代表<strong>引用类型</strong><br>在指定类型参数后可以传入该类型或其子类型，默认情况下会给Object类型</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>泛型类： class 类名 &lt;&gt;</p>
<ul>
<li>普通成员可以使用泛型（属性、方法）</li>
<li>使用泛型的数组不能初始化（类型不确定，开辟的空间大小未知）</li>
<li>静态方法中不能使用类的泛型（静态方法会跟着类的加载进行加载，而当时类的泛型尚未确定），但可以使用方法的泛型</li>
<li>泛型类的类型，是在创建对象时确定的</li>
</ul>
<p>泛型接口：interface 接口名 &lt;&gt;</p>
<ul>
<li>静态成员不能使用泛型</li>
<li>泛型接口的类型参数，在<em>继承接口</em>或<em>实现接口</em>时确定</li>
</ul>
<p>泛型方法：&lt;&gt; 返回类型 函数名()</p>
<ul>
<li>可以定义在普通类或泛型类中</li>
<li>泛型被调用时类型会被确定，即对应的类型参数会被绑定到对应类型，但调用结束后会取消绑定。</li>
</ul>
<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>规则:在类名后声明类型参数</p>
<h3 id="类型通配符"><a href="#类型通配符" class="headerlink" title="类型通配符"></a>类型通配符</h3><p>一般使用？代替具体的类型参数<br>类型通配符上限:<br>&lt;? extends class&gt; 泛型参数只能是class子类.<br>类型通配符下限:<br>&lt;? super class&gt; 泛型参数只能是class父类.</p>
<h2 id="Java集合"><a href="#Java集合" class="headerlink" title="Java集合"></a>Java集合</h2><p>主要包含两种类型的容器：<br>1.Collection 存储一个元素集合 其下有两重要子集 List Set（Collection没有直接实现子类，而是通过子接口实现）<br>2.Map 存储键&#x2F;值对映射</p>
<p><strong>在集合中存储的均为对象的引用，因此若在插入集合后对元素进行修改可能会影响删除操作</strong><br>例如在HashSet中，若修改与计算hash值有关的对象属性，则可能会导致删除不成功，因为修改前与修改后生成的hash值不同</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><h4 id="Set和List"><a href="#Set和List" class="headerlink" title="Set和List"></a>Set和List</h4><p>Set接口的存储是无序的，不重复的数据。List接口实例存储的是有序的，可重复的元素<br>Set检索效率低下，删除和插入效率高，插入和删除不会引起元素位置改变<br>List和数组类似，可以动态增长，根据实际存储的数据的长度自动增长，查找效率高，插入删除效率低。</p>
<h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h4><p>ArrayList底层是用<strong>数组</strong>来实现的<br>ArrayList与Vector之间的区别就是ArrayList是<strong>线程不安全</strong>的。<br>ArrayList中维护了一个Object类型的数组 transient Object[] elementData</p>
<h5 id="扩容机制"><a href="#扩容机制" class="headerlink" title="扩容机制"></a>扩容机制</h5><p>若使用无参构造器来创建，则初始化容量为0，第一个元素添加时，将容量扩展至10，此后如需再次扩容，则扩容为当前容量大小的1.5倍。<br>若使用指定容量的构造器，则之后扩容时，直接1.5倍。<br>扩容使用的是Arrays.copyOf()</p>
<h4 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h4><p>Vector底层是 protected Object[] elementData<br>Vector<strong>线程安全</strong><br>扩容机制：<br>如果是无参，默认10，满后按2倍扩。若有参，直接按2倍扩。</p>
<h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4><p>底层实现了双向链表和双端队列<br>可以添加任意元素<br>线程不安全</p>
<h4 id="Java-Iterator"><a href="#Java-Iterator" class="headerlink" title="Java Iterator"></a>Java Iterator</h4><p>iterator本身不存储数据，只用于遍历集合<br>迭代器可以类比为有头结点的链表<br>迭代器it三个基本操作：next, hasNext, remove<br>it.next() 返回下一个元素（Object），并且更新迭代器的状态<br>it.hasNext()用于检测集合中是否还有元素<br>it.remove() 将迭代器返回的元素删除 remove掉的是当前指向的元素，而非next元素</p>
<p>获取迭代器：集合想获取一个迭代器可以使用iterator()方法</p>
<p><strong>增强for的底层就是迭代器。</strong></p>
<h4 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h4><p>底层机制：<br>1.底层是HashMap <strong>用邻接表实现</strong>他的装载因子默认是0.75<br>2.添加一个元素时，先得到hash值，然后转成索引值<br>3.找到存储数据的表table，检查当前位置是否已经存放了元素<br>4.如果没有数据就直接插入，<br>   如果有数据，调用<strong>equals（调用的是当前对象的equals）</strong>比较，如果相同，则放弃添加，如果不相同就添加到最后。<br>5.若一条链表的元素个数超过TREEIFY_THRESHOLD(默认为8)，并且table的大小&gt;&#x3D;MIN_TREEIFY_CAPACITY(默认为64)，就会进行树化（红黑树），若链表个数超限，而表空间充足，则优先将表扩容(每次容量都*2)。</p>
<p>add详细过程：<br>首先检查是否为空表，若为空表，则将其大小初始化为16<br>接着用插入对象的hashCode计算hash值（hashCode和hash值不一样）<br>然后用hash值计算得到对应的数据表中的索引<br>如果对应索引为空，则new一个Node直接插入<br><strong>如果对应索引不为空：<br>(1)若插入位置已有对象的hash于插入对象的hash相同，且满足键值相同（即对象地址）或是调用当前对象的equals方法得到true则不插入<br>(2)若p为树节点，则调用红黑树的对应方法<br>(3)进入表中对应索引的链表，依次比较（方法同情况（1）相同）在插入完成后立即判断当前结点数是否达到8，若达到则进行树化（实际上在table表元素个数到64的情况下才会真的树化）</strong><br>当结点数&gt;0.75*容量时，扩容</p>
<h4 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h4><p>底层维护一个<strong>数组+双向链表</strong><br>双向链表结点 Entry 内含元素：before，after，数据<br>表中元素为：head, tail, table, entrySet<br>双向链表使得LinkedHashSet具备插入顺序与遍历顺序相同的特征，每一次插入，首先会找到对应hash值的索引的首个结点，然后从该节点开始沿着双向链表一个个比较，因此相比HashSet效率偏低。总结：双向链表将原本分布在table各索引中的结点串成了一串。</p>
<h3 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h3><p>table:HashMap$Node[]<br>Map中的key和value可以是任何<strong>引用类型</strong>的数据，会封装到HashMap$Node(实现Entry接口)<br>Map中的key不允许重复（具体去重操作同HashSet），若插入重复key，则后插入的value会覆盖之前的，且为null的key只能有一个，且会将被覆盖的value返回。<br>Map中的value可以重复<br>Map会维护一个entrySet用于方便遍历Map中的数据，其中的Entry是Node的父类，并且提供getKey和getValue方法，<strong>存储的是表中数据的地址</strong>。<br>HashMap线程不安全。</p>
<h4 id="HashTable"><a href="#HashTable" class="headerlink" title="HashTable"></a>HashTable</h4><p>key和value都<strong>不能为null</strong><br>线程安全<br>使用方法同HashMap一样<br>底层：维护一个数组HashTable$Entry[] table 初始化大小为11<br>每次扩容将当前大小*2 + 1</p>
<h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h4><p>继承了HashTable，且实现了Map接口</p>
<h4 id="TreeSet（带Tree的都可以排序）"><a href="#TreeSet（带Tree的都可以排序）" class="headerlink" title="TreeSet（带Tree的都可以排序）"></a>TreeSet（带Tree的都可以排序）</h4><p>本质是二叉搜索树，其迭代器使用中序遍历<br>若用无参构造器创建TreeSet则其依旧是无序的，若要排序，需要传入一个Comparator对象<br>对<strong>键值</strong>调用比较方法（键值不可为空）<br>TreeSet的去重机制，调用构造时传入的Comparator对象进行比较，<strong>若没有传入，则会调用插入对象实现的Comparator接口，若没有实现会报错，因为在底层会尝试将传入对象转变为Comparable对象</strong></p>
<h4 id="Collection工具类"><a href="#Collection工具类" class="headerlink" title="Collection工具类"></a>Collection工具类</h4><p>reverse(Collection):反转集合中元素<br>shuffle(Collection):将元素随机排列<br>sort(Collection, [Comparator]):排序 默认从小到大<br>max(Collection, [Comparator])<br>min(Collection, [Comparator])<br>swap(Collection, int, int) :交换元素<br>frequency(Collection, Object):返回某元素出现次数<br>copy(Collection dest, Collection src):将src中的数据拷贝到dest中，前提是dest的大小不小于src的大小<br>replaceAll(List, Object oldVal, Object newVal)</p>
<h2 id="绘图技术"><a href="#绘图技术" class="headerlink" title="绘图技术"></a>绘图技术</h2><p>1.先定义一个MyPanel类，继承JPanel类（MyPanel相当于画盘，其中paint方法的参数Graphics相当于画笔，带有很多画图方法）<br>2.让用于画图的类继承JFrame（一个框架，表示Graphics画图的界面）</p>
<h3 id="绘图原理"><a href="#绘图原理" class="headerlink" title="绘图原理"></a>绘图原理</h3><p>Component类提供了两个和绘图相关最重要的方法<br>1.paint(Graphics g)绘制组件外观<br>2.repaint()刷新组件外观</p>
<p>当组件<strong>第一次在屏幕显示的时候</strong>，程序会自动地调用paint()方法<br>在以下情况，paint()也会被调用：</p>
<ul>
<li>窗口最小化，再最大化</li>
<li>窗口的大小发生变化</li>
<li>repaint函数被调用</li>
</ul>
<p>获取图片资源<br>Image image &#x3D; Toolkit.getDefaultToolkit().getImage(Panel.class.getResource(“图片所在路径（要放在项目的根目录下）”))</p>
<h2 id="Java事件处理机制"><a href="#Java事件处理机制" class="headerlink" title="Java事件处理机制"></a>Java事件处理机制</h2><p>java事件处理是采取“委派事件模型”。当事件发生时，<em>产生事件的对象，会把此“信息”传递给“事件的监听者”处理</em>，这里所说的“信息”实际上就是java.awt.event事件库里某个类所创建的对象。</p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><p>进程是指运行中的程序，启动一个进程后，操作系统就会为该进程分配内存空间<br>进程是指程序的<strong>一次执行过程</strong>，或是正在运行的一个程序，是动态过程<br>只有进程中的所有线程全部死亡时，线程才会死亡</p>
<h3 id="线程-1"><a href="#线程-1" class="headerlink" title="线程"></a>线程</h3><p>线程是由进程创建的，是进程的一个实体。<br>一个进程可以拥有多个线程。</p>
<p>单线程：同一个时刻，只允许进行一个线程<br>多线程：同一个时刻，允许执行多个线程</p>
<p>并发：同一个时刻，多个任务<strong>交替进行</strong>， 单核CPU实现的多任务就是并发<br>并行：同一个时刻，多个任务同时执行，多核CPU可以实现并行</p>
<p>用户线程：当线程的任务执行完成或被通知结束时结束<br>守护线程：一般是为工作线程服务，当所有的用户线程结束时，守护线程自动结束<br>常见的守护线程：垃圾回收机制<br>将一个线程设置为守护线程：调用setDaemon() </p>
<p>JVM在所有非守护线程退出后退出</p>
<h4 id="线程的礼让与插队"><a href="#线程的礼让与插队" class="headerlink" title="线程的礼让与插队"></a>线程的礼让与插队</h4><p>yield:线程礼让，让出CPU，让其他线程执行，但礼让的事件不确定，所以也不一定礼让成功（当系统认为CPU资源充足时不会礼让）<br>join:线程插队，插队的线程一旦插队成功，则肯定先执行完插入的线程所有任务</p>
<h4 id="线程的生命周期"><a href="#线程的生命周期" class="headerlink" title="线程的生命周期"></a>线程的生命周期</h4><ul>
<li>新建状态：使用new关键字和Thread类或其子类建立一个线程对象后，该线程对象就处于新建状态，它保持这个状态直到程序start()这个线程</li>
<li>就绪状态：当线程对象调用了start()方法之后，该线程就进入就绪状态，此时线程处于就绪队列中，等待JVM里线程调度器的调度 <strong>实现多线程的核心</strong></li>
<li>运行状态：就绪状态的线程获取CPU资源，就可以执行run()，此时它就处于运行状态，<em>它可以变为阻塞状态，就绪状态和死亡状态</em> run()只是一个普通方法</li>
<li>阻塞状态:<br>如果一个线程执行了sleep（睡眠）、suspend（挂起）等方法，失去所占用资源之后，该线程就从运行状态进入阻塞状态。在睡眠时间已到或获得设备资源后可以重新进入就绪状态。可以分为三种：<ul>
<li>等待阻塞：运行状态中的线程执行 wait() 方法，使线程进入到等待阻塞状态。</li>
<li>同步阻塞：线程在获取 synchronized 同步锁失败(因为同步锁被其他线程占用)。</li>
<li>其他阻塞：通过调用线程的 sleep() 或 join() 发出了 I&#x2F;O 请求时，线程就会进入到阻塞状态。当sleep() 状态超时，join() 等待线程终止或超时，或者 I&#x2F;O 处理完毕，线程重新转入就绪状态。</li>
</ul>
</li>
<li>死亡状态</li>
</ul>
<h4 id="用Runnable接口创建线程"><a href="#用Runnable接口创建线程" class="headerlink" title="用Runnable接口创建线程"></a>用Runnable接口创建线程</h4><p>创建一个实现了Runnable接口的类，并实现run()，然后将其作为参数调用Thread的构造函数，用创建的thread类来调用start()<br>实现Runnable接口方式更加适合多个线程共享一个资源的情况，并且避免了单继承的限制。</p>
<h4 id="线程常用方法"><a href="#线程常用方法" class="headerlink" title="线程常用方法"></a>线程常用方法</h4><p>setName 设置线程名称<br>getName 返回线程名称<br>setPriority 更改线程优先级<br>getPriority 获取线程的优先级<br>interrupt 中断线程</p>
<h4 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h4><p>用synchronized修饰需要上锁的对象，使得该对象在任意时刻只能由一个线程访问<br>锁可以简单理解为一个标记对象，当该对象处于调用状态时代表别的线程此刻不能进行相关操作<br>同步方法&#x2F;代码块（非静态的）的锁可以是this，也可以是其他属性对象（要求各线程能接触到的锁是同一个对象）<br>同步方法&#x2F;代码块（静态的）的锁就是对象本身</p>
<h4 id="释放锁"><a href="#释放锁" class="headerlink" title="释放锁"></a>释放锁</h4><ul>
<li>当前线程的同步方法、同步代码块执行结束</li>
<li>当前线程在同步代码块中遇到break，return</li>
<li>当前线程在同步代码块，同步方法中出现了未处理的Error或Exception导致异常结束</li>
<li>当前线程在同步代码块，同步方法中执行了线程对象的wait()方法，当前线程暂停，并释放锁</li>
</ul>
<p>注：当线程执行同步代码块或同步方法时，程序调用Thread.sleep()或yield()不会释放锁</p>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p>文件在程序中是以<em>流的形式</em>来操作<br>流：数据在数据源（文件）和程序（内存）之间经历的路径<br>输入流：数据从数据源（文件）到程序（内存）的路径<br>输出流：数据从程序（内存）到数据源（文件）的路径</p>
<p>流的分类：<br>按操作数据单位：字节流（8bit）二进制文件，字符流（按字符）文本文件<br>按数据流的流向：输入流，输出流<br>按流的角色：节点流，处理流&#x2F;包装流</p>
<p>字节流: InputStream OutputStream<br>字符流:Reader Writer</p>
<p><strong>所有用到缓冲区的输出流每次写入完成后要刷新才能将数据写入</strong></p>
<p>PS:在不需要流之后要将其关闭，避免资源浪费。</p>
<h3 id="节点流和处理流"><a href="#节点流和处理流" class="headerlink" title="节点流和处理流"></a>节点流和处理流</h3><p>节点流：可以从一个<strong>特定</strong>的数据源读写数据<br>处理流：可以从<strong>任意</strong>数据源读写数据，并且自带缓冲  一般前缀为Buffered</p>
<p>处理流的构建：在构建时向其传入一个节点流，即可使其同时具备对应节点流与处理流带有的扩充功能。<br>关闭处理流：只需关闭外层流即可，内部的节点流会在close方法中被关闭<br><em>BufferedReader&#x2F;BufferedWriter不适合处理二进制文件</em></p>
<p>System.in 表示标准输入 键盘<br>编译类型：InputStream<br>运行类型：BufferedInputStream</p>
<p>System.out 表示标准输出 显示器<br>编译类型：PrintStream<br>运行类型：PrintStream</p>
<h4 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h4><p>可以将读取到的字节数据经过指定编码转换成字符 InputStreamReader<br>可以将读取到的字符数据经过指定编码转换成字节 OutputStreamWriter</p>
<p>应用场景:</p>
<ul>
<li>源或者目的对应的设备是字节流，但是操作的却是文本数据</li>
<li>操作文本涉及到具体的指定编码表</li>
</ul>
<p>打印流：PrintWriter, PrintStream(只有输出没有输入)</p>
<h2 id="Java序列化"><a href="#Java序列化" class="headerlink" title="Java序列化"></a>Java序列化</h2><p>机制:<br>一个对象可以被表示为一个字节序列，该字节序列包括该对象的数据、有关对象的类型的信息和存储在对象中数据的类型<br>将序列化对象写入文件之后，可以从文件中读取出来，并且对它进行反序列化(读取顺序必须和存储顺序一致)<br>类ObjectInputStream和ObjectOutputStream是高层次的数据流，他们包含反序列化和序列化对象的方法。</p>
<p>一个类的对象要想序列化成功，必须满足两个条件:<br>1.该类必须实现java.io.Serializable接口<br>2.该类的所有属性必须是可序列化的，如果有一个属性不是可序列化的，则该属性必须注明是短暂的。</p>
<p>注意事项：</p>
<ul>
<li>存储与读取的顺序必须一致</li>
<li>static或transient修饰的属性不会被序列化</li>
<li>序列化对象时，要求内部的属性也实现序列化接口</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/java/java-serialization.html">序列化知识</a></p>
<h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><ul>
<li>定义：能够分析类能力的程序称为反射</li>
<li>作用：<br>1.在运行时分析类的能力<br>2.在运行时查看对象<br>3.实现通用的数组操作代码<br>4.利用Method对象</li>
<li>价值：在不修改源码的情况下，增加、修改功能</li>
<li>原理：JVM将类的字节码文件通过类加载器生成Class类对象存放在堆中（每个类只生成一个）</li>
</ul>
<h3 id="2-常用类"><a href="#2-常用类" class="headerlink" title="2.常用类"></a>2.常用类</h3><p>java.lang.reflect包中有三个类</p>
<ul>
<li><p>Field 用于描述类的域</p>
</li>
<li><p>Method 用于描述类的方法</p>
</li>
<li><p>Constructor 用于描述类的构造器</p>
<p>（具体内容详见java核心技术P194）</p>
</li>
</ul>
<p><em>私有属性，方法，构造器，不可通过对应的getXXX()获得</em></p>
<h4 id="2-1Class类"><a href="#2-1Class类" class="headerlink" title="2.1Class类"></a>2.1Class类</h4><p>在程序加载完类之后，会调用ClassLoader创建该类的一个Class对象，并将其存储在堆中，其中保存了该类的所有信息。<strong>（每一个类只会创建一个Class对象）</strong></p>
<p>同时会在方法区存储类的二进制数据</p>
<p><em>PS:一个Class对象实际上表示的是一个类型，而这个类型未必一定是一种类（也有可能是原始数据类型 ，eg:int.class就是一个Class类，但int不是一个类）</em></p>
<p>newInstance()可用于动态的创建一个类的实例,他调用<strong>默认的</strong>构造器初始化新创建的对象。</p>
<pre class=" language-Java"><code class="language-Java">`eg:` 
`String s = "java.util.Random";`
`Object m = Class.forName(s).newInstance();`
</code></pre>
<p>调用有参构造器</p>
<pre><code>Class cls = Class.getForName(&quot;Cat&quot;);
Constructor constructor = cls.getConstructor(String.class);
//获取构造器，参数为获取的构造器需要的参数的Class类
Object o1 = constructor.newInstance(&quot;Cat&quot;);
</code></pre>
<p><em>注意：在反射中都是用方法调用对象,若有返回值，则只会返回Object</em></p>
<pre class=" language-java"><code class="language-java">method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre>
<p>反射调用优化：Field, Method, Constructor均有setAccessible(boolean)方法，设置为true可以关闭安全检查。(但会使得私有成员可以被访问)</p>
<h4 id="2-2获取Class类"><a href="#2-2获取Class类" class="headerlink" title="2.2获取Class类"></a>2.2获取Class类</h4><ol>
<li><p>已知一个类的全类名，且该类在类路径下，可通过Class.forName()获取</p>
<p>应用场景：多用于配置文件，读取类全路径，加载类</p>
<pre><code>String ClassFullPath = &quot;com.test.Cat&quot;;
Class cls = Class.forName(ClassFullPath);
</code></pre>
</li>
<li><p>已知具体的类，通过类的class获取，最安全可靠，且程序性能最高</p>
<p>应用场景：参数传递</p>
<pre><code>class Test&#123;&#125;
...
Class class = Test.class
</code></pre>
</li>
<li><p>已知实例，则可直接通过getClass()方法获得。</p>
</li>
<li><p>包装类可获取TYPE属性，它的哈希值与其对应的基本数据类型的Class的hash值相同.</p>
</li>
</ol>
<h3 id="3-类的加载"><a href="#3-类的加载" class="headerlink" title="3.类的加载"></a>3.类的加载</h3><h4 id="3-1静态，动态加载"><a href="#3-1静态，动态加载" class="headerlink" title="3.1静态，动态加载"></a>3.1静态，动态加载</h4><ul>
<li>静态加载：编译时就加载相关类，依赖性较强</li>
<li>动态记载：运行时加载需要的类</li>
</ul>
<h4 id="3-2类的加载时机"><a href="#3-2类的加载时机" class="headerlink" title="3.2类的加载时机"></a>3.2类的加载时机</h4><ul>
<li>创建对象时 &#x2F;&#x2F;静态加载</li>
<li>子类被加载时，父类也一并会被加载 &#x2F;&#x2F;静态加载</li>
<li>调用类中的静态成员时 &#x2F;&#x2F;静态加载</li>
<li>反射 &#x2F;&#x2F;动态加载</li>
</ul>
<h4 id="3-3类加载的过程"><a href="#3-3类加载的过程" class="headerlink" title="3.3类加载的过程"></a>3.3类加载的过程</h4><ol>
<li><p>加载：将类的class文件读入内存，并创建一个java.lang.Class对象</p>
</li>
<li><p>连接：将类的二进制数据合并到JRE中</p>
<ol>
<li><p>验证：安全校验</p>
<p>​	目的：确保Class文件的字节流中包含的信息符合当前虚拟机的要求，并且不会威胁虚拟机自身安全</p>
<p>​	包括：文件格式验证（是否以魔数oxcafebabe开头）、元数据验证、字节码验证和符号引用验证</p>
<p>​	PS：可以使用-Xverify:none参数来关闭大部分的类验证措施</p>
</li>
<li><p>准备：在该阶段对<strong>静态变量</strong>分配内存，并进行<strong>默认初始化</strong>（将其初始化为一个默认值，而非程序指定的值）</p>
<p>​		  而对于<strong>静态常量</strong>则会<strong>直接赋值</strong>。</p>
</li>
<li><p>解析：JVM将常量池内的符号引用替换为直接引用的过程（可以理解为从图纸到实物的过程）</p>
</li>
</ol>
</li>
<li><p>初始化：JVM负责对类进行初始化，主要是<strong>静态成员</strong></p>
<p>​	真正开始执行类中定义的Java程序代码，此阶段是执行&lt;clinit&gt;()方法的过程</p>
<p>​	该方法由编译器按语句在<strong>源文件中出现的顺序</strong>，依次收集类中的所有<strong>静态变量</strong>的赋值动作和<strong>静态代码块</strong>中的语句，并进行合并。（该方法有线程锁）</p>
</li>
</ol>
<p>类加载后内存布局：</p>
<p>在<u>方法区</u>中存储类的二进制数据，并根据它在<u>堆</u>中生成一个类的Class对象</p>
<h4 id="3-4通过反射创建对象"><a href="#3-4通过反射创建对象" class="headerlink" title="3.4通过反射创建对象"></a>3.4通过反射创建对象</h4><p>相关方法：</p>
<ul>
<li>Class:<ul>
<li>getConstructor(Class&lt;?&gt;) 获取对应参数列表的public构造器</li>
<li>getDeclaredConstructor(Class&lt;?&gt;)获取对应参数列表的任意构造器</li>
</ul>
</li>
<li>Constructor:<ul>
<li>newInstance()创建一个实例</li>
<li>setAccessible()暴破（暴破后可操作私有属性）</li>
</ul>
</li>
</ul>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><p>JDBC:提供一套<strong>统一的数据库接口</strong>由数据库厂商实现</p>
<h3 id="1-JDBC编写流程："><a href="#1-JDBC编写流程：" class="headerlink" title="1.JDBC编写流程："></a>1.JDBC编写流程：</h3><h5 id="1-1注册驱动：获取Driver类"><a href="#1-1注册驱动：获取Driver类" class="headerlink" title="1.1注册驱动：获取Driver类"></a>1.1注册驱动：获取Driver类</h5><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//com.mysql.cj.jdbc.Driver</span>
Driver driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h5 id="1-2连接：获取Connection类"><a href="#1-2连接：获取Connection类" class="headerlink" title="1.2连接：获取Connection类"></a>1.2连接：获取Connection类</h5><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//url jdbc:mysql://ip地址:端口号/数据库名称?serverTimezone=UTC"</span>
String url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/coursecrash?serverTimezone=UTC"</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//登录信息</span>
Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"Cxc020603"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Connection connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h5 id="1-3CRUD：发送SQL语句"><a href="#1-3CRUD：发送SQL语句" class="headerlink" title="1.3CRUD：发送SQL语句"></a>1.3CRUD：发送SQL语句</h5><pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"insert into ade values('lgd', 'shen')"</span><span class="token punctuation">;</span>

Statement statement <span class="token operator">=</span> connect<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> row <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h5 id="1-4释放资源"><a href="#1-4释放资源" class="headerlink" title="1.4释放资源"></a>1.4释放资源</h5><h3 id="2-数据库连接方式"><a href="#2-数据库连接方式" class="headerlink" title="2.数据库连接方式"></a>2.数据库连接方式</h3><ul>
<li>注册进DriverManage，方便统一管理</li>
</ul>
<pre class=" language-java"><code class="language-java">String url<span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/coursecrash?serverTimezone=UTC"</span><span class="token punctuation">;</span>
String user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
String passwd <span class="token operator">=</span> <span class="token string">"Cxc020603"</span><span class="token punctuation">;</span>
Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String sql <span class="token operator">=</span> <span class="token string">"insert into ade values('lgd', 'shen')"</span><span class="token punctuation">;</span>
Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Driver driver1 <span class="token operator">=</span> <span class="token punctuation">(</span>Driver<span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
DriverManager<span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span>driver1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//注册驱动</span>
Connection connection <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> passwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//Statement用于执行静态的SQL语句，并返回结果</span>
Statement statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//返回值为影响的行数</span>
statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><p>在类加载的时候（Class.forName()）会自动注册数据库驱动,因此可以省略</p>
</li>
<li><p>mysql驱动5.1.6以上可以无需Class.forName(),从jdk1.5以后使用了jdbc4，不再需要显式调用class.forName()注册驱动而是自动调用驱动jar包下META-INF\services\java.sql.Driver文本中的类名称去注册</p>
</li>
<li><p>通过配置文件获取连接的相关信息（软编码，推荐）</p>
</li>
</ul>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ClassNotFoundException<span class="token punctuation">,</span> SQLException<span class="token punctuation">,</span> IOException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\load.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    

    Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//加载驱动类</span>

    Connection connection <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Statement statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//String sql = "create table TestTable (name varchar(5), age int, id int AUTO_INCREMENT, primary key(id))";</span>
    String sql <span class="token operator">=</span> <span class="token string">"insert into testtable values ('cxc', 18, null),"</span> <span class="token operator">+</span>
            <span class="token string">"('pcx', 18, null), ('lgd', 20, null)"</span><span class="token punctuation">;</span>
    String sql1 <span class="token operator">=</span> <span class="token string">"delete from testtable where id=3"</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<pre class=" language-properties"><code class="language-properties"><span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/coursecrash?serverTimezone=UTC</span>
<span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">Cxc020603</span>
<span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
</code></pre>
<p>ps:properties以字符串键值对存储，不需要加双引号</p>
<h3 id="3-ResultSet"><a href="#3-ResultSet" class="headerlink" title="3.ResultSet"></a>3.ResultSet</h3><p>用exectueQuery(sql)处理传入的select语句后会返回一个结果集</p>
<pre class=" language-java"><code class="language-java">ResultSet resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//previous()向上移动一行</span>
<span class="token comment" spellcheck="true">//相当于向下移动一行，初始状态下处于无效位置</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//取出指定列的数据</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getXXX</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment" spellcheck="true">//XXX指该列的数据类型，//传入的参数可以是列的索引，也可以是列名</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>ResultSet中有一个rows属性，其数据类型为ArrayList,其中存储对象类数组，用于表示每一个数据</p>
<p><em>ResultSet与对应的连接绑定，一旦连接关闭，将无法再使用结果集</em></p>
<h3 id="拓展：SQL注入"><a href="#拓展：SQL注入" class="headerlink" title="拓展：SQL注入"></a>拓展：SQL注入</h3><p>Statement存在SQL注入风险</p>
<p>SQL注入：利用某些系统没有对用户输入的数据进行充分的检查，而在用户输入数据中注入非法的SQL语句段或命令，恶意攻击数据库</p>
<p>eg：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ClassNotFoundException<span class="token punctuation">,</span> SQLException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    Scanner scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\load.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Connection connection <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Statement statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入用户名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String user1 <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String passwd <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    String sql <span class="token operator">=</span> <span class="token string">"select * from admin where name = '"</span> <span class="token operator">+</span> user1 <span class="token operator">+</span> <span class="token string">"' and password = '"</span> <span class="token operator">+</span> passwd <span class="token operator">+</span> <span class="token string">"'"</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ResultSet resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        String sucess <span class="token operator">=</span> <span class="token string">"登陆成功"</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sucess<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        String fail <span class="token operator">=</span> <span class="token string">"Fail"</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fail<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>运行结果</p>
<pre><code>输入用户名：
1&#39;
输入密码
or &#39;1&#39;=&#39;1
select * from admin where name = &#39;1&#39;&#39; and password = &#39;or &#39;1&#39;=&#39;1&#39;
登陆成功

Process finished with exit code 0
</code></pre>
<h3 id="4-PreparedStatement"><a href="#4-PreparedStatement" class="headerlink" title="4.PreparedStatement"></a>4.PreparedStatement</h3><p>预处理Statement</p>
<p>预编译：在调用prepareStatement()时会直接将SQL语句提交给数据库编译，得到的PreparedStatement句柄是一个预编译好的SQL语句，添加参数后可直接执行。</p>
<p>将自身与某一sql语句绑定，sql语句中的参数用“？”作为占位符(占位符两边会自动加上引号)</p>
<p>因此占位符只能占位SQL语句中的普通值，绝不能占位表名，SQL关键字</p>
<p>调用setXXX(占位符的索引，占位符的值)方法来填充参数（参数索引从1开始）</p>
<pre class=" language-java"><code class="language-java">String sql <span class="token operator">=</span> <span class="token string">"select * from admin where name = ? and password = ?;"</span><span class="token punctuation">;</span>
Connection connection <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//此处将上方的sql语句与PreparedStatement绑定</span>
PreparedStatement preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入用户名："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String user1 <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输入密码"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
String passwd <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>passwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
ResultSet resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"failure"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>优势：</p>
<ul>
<li>不通过字符串拼接写SQL语句</li>
<li>可以防止SQL注入（自动在占位符两边添加引号）</li>
</ul>
<h3 id="5-JDBC事务处理"><a href="#5-JDBC事务处理" class="headerlink" title="5.JDBC事务处理"></a>5.JDBC事务处理</h3><p>开启事务： 调用Connect对象的setCommit(false)方法</p>
<p><em>默认情况下自动提交</em></p>
<p>提交事务：调用Connect对象的commit()方法</p>
<p>回滚：调用Connect对象的rollback([savepoint])方法</p>
<h3 id="6-批处理"><a href="#6-批处理" class="headerlink" title="6.批处理"></a>6.批处理</h3><p>通常与PreparedStatement搭配使用</p>
<p>在连接MySQL的url中添加参数rewriteBatchedStatements&#x3D;true</p>
<p>addBatch()将当前的sql语句添加到批处理包中</p>
<p>executeBatch()将包中的sql语句全部执行一遍</p>
<p>clearBatch()清空包</p>
<pre class=" language-java"><code class="language-java">Connection connect <span class="token operator">=</span> JDBCUtil<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PreparedStatement preparedStatement <span class="token operator">=</span> null<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//String sql = "insert into ade values (?, ?)";</span>
String sql <span class="token operator">=</span> <span class="token string">"delete from ade where name=?"</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    preparedStatement <span class="token operator">=</span> connect<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"cxc"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//preparedStatement.setString(2, "ohh");</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">clearBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> end <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>作用：批量处理数据，减少编译次数，以及发送sql语句的网络开销</p>
<h3 id="7-数据库连接池"><a href="#7-数据库连接池" class="headerlink" title="7.数据库连接池"></a>7.数据库连接池</h3><h4 id="7-1传统的获取连接的方式的问题分析"><a href="#7-1传统的获取连接的方式的问题分析" class="headerlink" title="7.1传统的获取连接的方式的问题分析"></a>7.1传统的获取连接的方式的问题分析</h4><ol>
<li>每次向数据库建立连接都需要将Connection加载到内存中，再验证IP地址，用户名和密码，需要数据库连接时就申请一个，频繁连接会占用大量资源，造成服务器崩溃</li>
<li>每次连接使用完都得断开，若程序出现异常未能关闭，会导致数据库内存泄漏</li>
<li>不能控制创建的连接数量，若连接过多，也有可能导致内存泄漏，MySQL崩溃（没有缓冲机制）</li>
</ol>
<h4 id="7-2连接池基本介绍"><a href="#7-2连接池基本介绍" class="headerlink" title="7.2连接池基本介绍"></a>7.2连接池基本介绍</h4><ol>
<li>预先向缓冲池中加入一定数量的连接<strong>（已经创建好的）</strong></li>
<li>数据库连接池负责分配，管理和释放数据库连接，他允许应用程序<strong>重复</strong>使用一个现有的数据库连接。每次程序使用完成之后，<strong>只是连接的引用消失，但连接本身依旧存在</strong></li>
<li>当应用程序向连接池请求的连接数超过最大连接数量时，这些请求将被加入到等待队列</li>
</ol>
<h4 id="7-3-c3p0连接池"><a href="#7-3-c3p0连接池" class="headerlink" title="7.3 c3p0连接池"></a>7.3 c3p0连接池</h4><ol>
<li>导入jar包</li>
</ol>
<p>连接方式1：</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> SQLException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    ComboPooledDataSource comboPooledDataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\load.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setDriverClass</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setJdbcUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PropertyVetoException</span> e<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setInitialPoolSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    comboPooledDataSource<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        Connection connection <span class="token operator">=</span> comboPooledDataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token keyword">long</span> end <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>连接方式2（配置文件）：</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- 文件名 c3p0-config.xml 放置在src文件夹下 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- 数据源名称 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mySource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- 若为default-config 则在生成管理对象时不需要传入参数 --></span>
        <span class="token comment" spellcheck="true">&lt;!-- 驱动类 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driverClass<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- url --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbcUrl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>jdbc:mysql://localhost:3306/coursecrash?serverTimezone=UTC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- user --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- password --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Cxc020603<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>

        <span class="token comment" spellcheck="true">&lt;!-- 初始化连接池中的连接数量大小 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>initialPoolSize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- 最大连接时长 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxIdleTime<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- 最大连接数 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxPoolSize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!-- 最小连接数 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>minPoolSize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">></span></span>
</code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">connect2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    ComboPooledDataSource mySource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token string">"mySource"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Connection connection <span class="token operator">=</span> mySource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="7-4德鲁伊连接池"><a href="#7-4德鲁伊连接池" class="headerlink" title="7.4德鲁伊连接池"></a>7.4德鲁伊连接池</h4><p>导入jar包</p>
<p>配置文件：</p>
<pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># 数据库连接参数</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/coursecrash?serverTimezone=UTC&amp;rewriteBatchedStatements=true</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">Cxc020603</span>
<span class="token comment" spellcheck="true"># 驱动</span>
<span class="token attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token comment" spellcheck="true"># 连接池的参数</span>
<span class="token comment" spellcheck="true"># 初始虎啊连接数</span>
<span class="token attr-name">initialSize</span><span class="token punctuation">=</span><span class="token attr-value">10</span>
<span class="token comment" spellcheck="true">#最大连接数</span>
<span class="token attr-name">maxActive</span><span class="token punctuation">=</span><span class="token attr-value">10</span>
<span class="token comment" spellcheck="true">#最大等待时长</span>
<span class="token attr-name">maxWait</span><span class="token punctuation">=</span><span class="token attr-value">200</span>
</code></pre>
<pre class=" language-java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">druid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"src\\druid.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    DataSource dataSource <span class="token operator">=</span> DruidDataSourceFactory<span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Connection connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="8-ApDBUtils"><a href="#8-ApDBUtils" class="headerlink" title="8. ApDBUtils"></a>8. ApDBUtils</h3><h4 id="8-1-POJO-简单java对象"><a href="#8-1-POJO-简单java对象" class="headerlink" title="8.1 POJO(简单java对象)"></a>8.1 POJO(简单java对象)</h4><p>创建一个java对象，用其中的属性，映射ResultSet中的各个字段</p>
<h4 id="8-2-DBUtils类"><a href="#8-2-DBUtils类" class="headerlink" title="8.2 DBUtils类"></a>8.2 DBUtils类</h4><ol>
<li>QueryRunner类：该类封装了SQL的执行方法，<em>线程安全</em>，可以实现增删改查</li>
<li>ResultSetHandler接口：该接口用于处理java.sql.ResultSet,将数据按要求转换为另一种形式（POJO）</li>
</ol>
<p>常用ResultSet接口实现类：</p>
<ul>
<li>ArrayHandler:把结果集中的每一行数据都转成一个数组，再存放到List中</li>
<li>BeanHandler:将结果集中的第一行数据封装到一个POJO中</li>
<li>BeanListHandler:将结果集中的每一行数据都封装到一个对应的POJO实例中</li>
<li>ScalarHandler:若结果中只有单个值，则用该实现类处理，若有多个值，则会返回第一列数据处理后结果。</li>
</ul>
<h4 id="8-3基本使用"><a href="#8-3基本使用" class="headerlink" title="8.3基本使用"></a>8.3基本使用</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//获取连接</span>
    Connection connection <span class="token operator">=</span> DruidUtils<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//生成QueryRunner对象</span>
    QueryRunner queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//需要预编译处理的语句</span>
    String sql <span class="token operator">=</span> <span class="token string">"select * from ade where name=?"</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//query方法参数，连接，sql语句，ResultSetHandler接口，sql语句中的参数</span>
    List<span class="token operator">&lt;</span>POJO<span class="token operator">></span> query <span class="token operator">=</span>
            queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>POJO<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"cxc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>POJO pojo <span class="token operator">:</span> query<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pojo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
    DruidUtils<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> null<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>query底层使用preparedStatement操作sql语句，并会自动关闭Statement与ResultSet，在转换ResultSet中的数据时，会通过反射获取POJO类的属性，构造器等，然后返回一个对应的数组形式的结果集合。</p>
<p><em>若要传入基础数据类型，则要使用对应的包装类， 基本数据类型不能为空</em></p>
<h3 id="9-BasicDao"><a href="#9-BasicDao" class="headerlink" title="9.BasicDao"></a>9.BasicDao</h3><p>DAO：data access object数据访问对象</p>
<p>此类对象专门用于对特定类的数据进行增删改查</p>
<p>具体关系：</p>
<p>XXPOJO映射XX表中的数据</p>
<p>XXDAO对XX表进行CRUD</p>
<h3 id="10-Dao-Service-Controller"><a href="#10-Dao-Service-Controller" class="headerlink" title="10.Dao, Service, Controller"></a>10.Dao, Service, Controller</h3><p>Dao：数据访问层，对数据进行增删改查</p>
<p>Service：业务逻辑层，通过Dao的组合实现具体的业务逻辑</p>
<p>Controller：控制层，转发Service的业务处理结果，但不暴露Service层的业务逻辑</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Faustxc</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://FaustProMaxPX.github.io/2022/06/29/Java/">http://FaustProMaxPX.github.io/2022/06/29/Java/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Faustxc</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Java/">
                                    <span class="chip bg-color">Java</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2022/06/29/Java/">
                    <div class="card-image">
                        
                        <img src="https://raw.githubusercontent.com/FaustProMaxPX/pic_repository/main/img/JavaCupLogo.png" class="responsive-img" alt="Java">
                        
                        <span class="card-title">Java</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            一份关于Java基本操作的笔记
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-29
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                    学习笔记
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Java/">
                        <span class="chip bg-color">Java</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/06/29/make/">
                    <div class="card-image">
                        
                        <img src="https://raw.githubusercontent.com/FaustProMaxPX/pic_repository/main/img/1.jpg" class="responsive-img" alt="Remake | Makefile">
                        
                        <span class="card-title">Remake | Makefile</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            菜狗的Remake之路 – Makefile篇
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-29
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Remake/" class="post-category">
                                    Remake
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Makefile/">
                        <span class="chip bg-color">Makefile</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">21.9k</span>
            
            <br>
            <span id="sitetime"></span>
            <br>
            <!-- 
                <span id="year">2019-2022</span>
            
            <a href="/about" target="_blank">Faustxc</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br> -->
            
            
            
                
            
            <!-- 
                <span id="busuanzi_container_site_pv" style="display: none;">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv" style="display: none;">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
             -->
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/FaustProMaxPX" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1546327522@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1546327522" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1546327522" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>

<script language=javascript> 
    function siteTime() { 
        window.setTimeout("siteTime()", 1000); 
        var seconds = 1000; 
        var minutes = seconds * 60; 
        var hours = minutes * 60; 
        var days = hours * 24; 
        var years = days * 365; 
        var today = new Date(); 
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1; 
        var todayDate = today.getDate(); 
        var todayHour = today.getHours(); 
        var todayMinute = today.getMinutes(); 
        var todaySecond = today.getSeconds(); 
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳) 
        year - 作为date对象的年份，为4位年份值 
        month - 0-11之间的整数，做为date对象的月份 
        day - 1-31之间的整数，做为date对象的天数 
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数 
        minutes - 0-59之间的整数，做为date对象的分钟数 
        seconds - 0-59之间的整数，做为date对象的秒数 
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */ 
        var t1 = Date.UTC(2022, 05, 29, 00, 00, 00); //北京时间2018-2-13 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1; 
        var diffYears = Math.floor(diff / years); 
        var diffDays = Math.floor((diff / days) - diffYears * 365); 
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours); 
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes); 
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds); 
        document.getElementById("sitetime").innerHTML = "本站已运行 " +diffYears+" 年 "+diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒"; }
        
        siteTime(); 

</script>
<script> 
    $(document).ready(function () { 
        var int = setInterval(fixCount, 50); // 50ms周期检测函数 
        var pvcountOffset = 80000; // 初始化首次数据 
        var uvcountOffset = 20000; function fixCount() { 
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") { 
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset); 
                clearInterval(int); 
            } 
            if ($("#busuanzi_container_site_pv").css("display") != "none") { 
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int); // 停止检测 
            } } }); 
</script>

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
